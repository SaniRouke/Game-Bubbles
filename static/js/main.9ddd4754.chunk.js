(this.webpackJsonpbubbles=this.webpackJsonpbubbles||[]).push([[0],{10:function(t,e,a){},12:function(t,e,a){"use strict";a.r(e);var s=a(1),r=a.n(s),i=a(4),o=a.n(i),n=(a(9),a(10),a(2)),l=a.p+"static/media/bubble_frames.71faec4c.png",c=a.p+"static/media/oar-skyrim.c07a4acb.png",h=a(0);function d(){return Object(s.useEffect)((function(){p()})),Object(h.jsx)("div",{children:Object(h.jsx)("canvas",{id:"canvas"})})}var p=function(){var t=document.getElementById("canvas").getContext("2d");new u(t).play()},u=function t(e){var a=this;Object(n.a)(this,t),this.props={ctx:null,canvas:null,stage:0,isPlay:!0,bubbleSprite:null,oarSprite:null,mousePos:{prev:{x:0,y:0},x:0,y:0},wind:{power:0,isRightDirection:!1,tempForSin:0},time:{current:null,start:null,end:60,isEnd:null}},this.bubbles={countDependsOnWidth:100,count:0,list:[]},this.oar=null,this.gameInterface=null,this.settingCanvas=function(){var t=a.props;t.canvas.width=window.innerWidth,t.canvas.height=window.innerHeight},this.setGameProps=function(){var t=a.bubbles,e=a.props;t.count=e.canvas.width/t.countDependsOnWidth,e.bubbleSprite=new Image,e.bubbleSprite.src=l,e.oarSprite=new Image,e.oarSprite.src=c,a.oar=new x(e),a.gameInterface=new m(e)},this.addEvents=function(){var t=a.props;t.canvas.addEventListener("click",a.restart),setInterval(a.runWind,1e3*(2*Math.random()+3)),a.runWind(),t.canvas.addEventListener("mousemove",a.setMousePos)},this.runWind=function(){var t=a.props.wind;t.isRightDirection=Math.floor(2*Math.random());var e=setInterval((function(){(t.power<0||t.tempForSin>10)&&(t.tempForSin=0,t.power=0,clearInterval(e)),t.tempForSin+=.1*Math.random()+.3,t.power+=Math.sin(t.tempForSin/2)}),100)},this.play=function(){a.gameAnimate(),a.gameRender(),requestAnimationFrame(a.play)},this.gameAnimate=function(){var t=a.props,e=a.bubbles,s=a.oar,r=a.gameInterface;0!==a.props.stage&&a.update(),1===a.props.stage&&(t.time.isEnd&&(t.stage=2),s.move(),e.list.forEach((function(t){t.move()}))),2===a.props.stage&&e.list.forEach((function(t){t.moveYRush()})),r.drawCursor()},this.gameRender=function(){a.props;var t=a.bubbles,e=a.oar,s=a.gameInterface;a.clearContext(),a.drawBackground(),a.drawWind(),t.list.forEach((function(t){t.render()})),0===a.props.stage&&(s.drawIntro(),s.drawStartButton()),1===a.props.stage&&(e.render(),s.drawScore(),s.update(),s.drawTimer()),2===a.props.stage&&(s.drawResult(),s.drawStartButton()),s.drawCursor()},this.clearContext=function(){var t=a.props,e=t.canvas.width,s=t.canvas.height;t.ctx.clearRect(0,0,e,s)},this.update=function(){var t=a.props,e=a.bubbles,s=a.oar,r=a.gameInterface;a.settingCanvas(),e.list=e.list.filter((function(t){return!t.isDead})),t.time.isEnd||(e.list.forEach((function(t){if(!t.frame.isExploding){if(s.isCollision(t)){var e=t.explode();r.addScore(e,!0)}if(t.pos.bottom<0){var a=t.explode();r.addScore(a,!1)}}})),e.list.length<e.count&&e.list.push(new v(a.props)))},this.restart=function(){var t=a.props;a.gameInterface.startButton.isMouseCollision()&&(t.stage=1,a.restartTimer())},this.setMousePos=function(t){var e=a.props;e.mousePos.x=t.clientX,e.mousePos.y=t.clientY},this.drawBackground=function(){var t=a.props,e=t.ctx,s=t.canvas,r=e.createRadialGradient(0,0,0,0,0,s.width);r.addColorStop(0,"rgba(0,150,200,0)"),r.addColorStop(1,"rgba(0,0,0,0.9)");var i=e.createLinearGradient(0,0,0,s.height);i.addColorStop(0,"rgba(100,255,255,1)"),i.addColorStop(.3,"rgba(0,150,200,0)"),i.addColorStop(.95,"rgba(0,0,0,1)"),e.save(),e.fillStyle=i,e.fillRect(0,0,s.width,s.height),e.fillStyle=r,e.fillRect(0,0,s.width,s.height),e.restore()},this.drawWind=function(){var t=a.props,e=t.ctx,s=t.canvas,r=s.height/2,i=200,o=Math.random()*s.width,n=Math.random()*s.height-r,l=o,c=r-n;e.save();var h=a.props.wind.power/50;if(e.strokeStyle="rgba(150,255,255,".concat(h,")"),e.beginPath(),e.moveTo(l,c),a.props.wind.isRightDirection){var d=o+i,p=r-n*(1+.3*l/s.width);e.quadraticCurveTo(l+120,c+(p-c)/100,d,p)}else{var u=o-i,v=r-n*(1+(.3-.3*l/s.width));e.quadraticCurveTo(l-120,c+(v-c)/100,u,v)}e.stroke(),e.closePath(),e.restore()},this.restartTimer=function(){a.props.time.start=Date.now(),a.props.time.isEnd=!1,a.gameInterface.score.value=0,a.gameInterface.score.missed=0};var s=this.props;s.ctx=e,s.canvas=e.canvas,this.settingCanvas(),this.setGameProps(),this.addEvents()},v=function t(e){var a=this;Object(n.a)(this,t),this.gameProps=null,this.ctx=null,this.canvas=null,this.size=null,this.minSize=5,this.maxSize=100,this.color=null,this.step=null,this.isDead=!1,this.pos={x:null,y:null,top:null,right:null,bottom:null,left:null},this.frame={current:0,isExploding:!1,size:512},this.render=function(){var t=a.frame,e=a.gameProps;a.drawBackground(),e.bubbleSprite&&a.drawFrame(t.current)},this.move=function(){a.moveY(),a.moveX(),a.updateSidesPos()},this.moveYRush=function(){a.moveY(),a.step*=1.05},this.moveY=function(){var t=a.gameProps,e=a.pos,s=a.step;a.frame;1===t.stage&&(a.step=2*t.time.current/60+2),e.y-=s},this.moveX=function(){var t=a.canvas,e=a.pos,s=a.size,r=a.maxSize,i=a.gameProps,o=t.width/e.x,n=-t.width/(t.width-e.x),l=10*r/s*(i.wind.isRightDirection?o:n);e.x+=l/500*i.wind.power,e.x-s/2.5<0&&(e.x=s/2.5),e.x+s/2.5>t.width&&(e.x=t.width-s/2.5)},this.updateSidesPos=function(){var t=a.pos,e=a.size;t.top=t.y-e/2,t.right=t.x+e/2,t.bottom=t.y+e/2,t.left=t.x-e/2},this.explode=function(){var t=a.frame,e=a.size;t.isExploding=!0;var s=setInterval((function(){t.current++,t.current>5&&(clearInterval(s),a.isDead=!0)}),50);return e},this.drawFrame=function(t){var e=a.ctx,s=a.canvas,r=a.pos,i=a.size,o=a.gameProps,n=a.frame.size,l=t%3*n,c=t>2?n:0;e.save(),e.translate(r.x,r.y);var h=-s.width/2-r.x,d=-s.height-r.y,p=Math.atan2(d,h)/Math.PI*180;e.rotate(Math.PI/180*(135+p)),e.translate(-r.x,-r.y),e.drawImage(o.bubbleSprite,l,c,n,n,r.x-i/2,r.y-i/2,i,i),e.restore()},this.drawBackground=function(){var t=a.ctx,e=a.pos,s=a.size,r=a.color,i=s/(a.frame.current+1);t.save();var o=t.createRadialGradient(e.x,e.y,0,e.x,e.y,i);o.addColorStop(0,r),o.addColorStop(.4,"transparent"),t.globalCompositeOperation="soft-light",t.beginPath(),t.arc(e.x,e.y,2*i,0,2*Math.PI),t.fillStyle=o,t.fill(),t.closePath(),t.restore()},this.gameProps=e,this.ctx=e.ctx,this.canvas=e.canvas,this.size=Math.floor(Math.random()*(this.maxSize-this.minSize)+this.minSize),this.step=10/this.size+1,this.pos={x:Math.floor(Math.random()*(this.canvas.width-this.size)+this.size/2),y:Math.floor(Math.random()*this.canvas.height+this.canvas.height)},this.updateSidesPos(),this.color="rgba(".concat(255*Math.random(),",").concat(255*Math.random(),", ").concat(255*Math.random(),",1)")},x=function t(e){var a=this;Object(n.a)(this,t),this.gameProps=null,this.size=250,this.angle=0,this.render=function(){var t=a.ctx,e=a.pos,s=a.angle,r=a.size,i=a.gameProps;t.save(),t.translate(e.x,e.y),t.rotate(Math.PI/180*143),t.rotate(s),t.drawImage(i.oarSprite,50,0,500,500,-r/2,-r/2,r,r),t.restore()},this.move=function(){var t=a.canvas,e=a.pos,s=a.gameProps.mousePos;s.prev.x=e.x;var r=s.x-s.prev.x;e.x+=r/50;var i=e.x-t.width/2;a.angle=-Math.PI/180*i/10,a.updateHitBoxPos()},this.updateHitBoxPos=function(){var t=a.canvas,e=a.size;a.hitBox={radius:50,pos:{x:t.width/2+(t.width/2-a.pos.x)/t.width*-t.width*1.2,y:a.pos.y+e/3}}},this.isCollision=function(t){var e=a.hitBox,s=Math.min(e.pos.x,t.pos.x),r=Math.min(e.pos.y,t.pos.y),i=Math.max(e.pos.x,t.pos.x)-s,o=Math.max(e.pos.y,t.pos.y)-r;return Math.sqrt(i*i+o*o)<e.radius+t.size/3},this.gameProps=e,this.ctx=e.ctx,this.canvas=e.ctx.canvas,this.pos={x:this.canvas.width/2,y:0}},m=function t(e){var a=this;Object(n.a)(this,t),this.gameProps=null,this.baseSize=20,this.font="".concat(this.baseSize,"px monospace"),this.cursor={pos:null},this.score={value:0,missed:0,pos:{x:null,y:null}},this.timer={time:0,pos:{x:null,y:null}},this.startButton={radius:3*this.baseSize,pos:{x:null,y:null},isDrawn:!1,isMouseCollision:function(){var t=a.startButton,e=t.pos,s=t.radius,r=a.gameProps.mousePos,i=Math.min(e.x,r.x),o=Math.min(e.y,r.y),n=Math.max(e.x,r.x)-i,l=Math.max(e.y,r.y)-o;return!!(Math.sqrt(n*n+l*l)<s&&a.startButton.isDrawn)}},this.intro={pos:{x:null,y:null}},this.result={pos:{x:null,y:null}},this.setPositions=function(){var t=a.canvas,e=a.baseSize,s=a.score,r=a.timer,i=a.startButton,o=a.intro,n=a.result;s.pos={x:t.width-e/4,y:t.height-e},r.pos={x:e/4,y:t.height-e},i.pos={x:t.width/2,y:t.height/2+3.5*e},o.pos={x:t.width/2,y:t.height/2},n.pos={x:t.width/2,y:t.height/2-10*e}},this.update=function(){var t=a.gameProps.time;t.current=Math.floor((Date.now()-t.start)/1e3),t.isEnd=t.current>t.end,t.isEnd&&(t.current=t.end),a.startButton.isDrawn=!1},this.drawStartButton=function(){var t=a.ctx,e=a.baseSize,s=a.startButton,r=s.pos,i=s.radius;s.isDrawn=!0;var o=t.createRadialGradient(r.x,r.y,0,r.x,r.y,i);o.addColorStop(0,"rgba(200,90,50,1)"),o.addColorStop(.9,"rgba(200,50,50,0.7)"),o.addColorStop(1,"transparent");var n=t.createRadialGradient(r.x,r.y,0,r.x,r.y,i);n.addColorStop(0,"rgba(200,90,50,1)"),n.addColorStop(.9,"rgba(200,50,50,1)"),n.addColorStop(1,"transparent"),t.save(),t.fillStyle=o,a.startButton.isMouseCollision()&&(t.fillStyle=n),t.beginPath(),t.arc(r.x,r.y,i,0,2*Math.PI),t.closePath(),t.fill(),t.restore(),t.save(),t.fillStyle="rgba(200,200,200,0.8)",t.font="".concat(e,"px monospace"),t.textAlign="center",t.textBaseline="middle",t.fillText("START",r.x,r.y),t.restore()},this.drawScore=function(){var t=a.ctx,e=a.score,s=a.baseSize,r=e.pos,i=e.value;t.save(),t.font="".concat(4*s,"px Freckle Face"),t.textBaseline="top",t.textAlign="right",t.fillStyle="rgba(200,120,0,0.8)",t.fillText(i,r.x,r.y-6*s),t.font="".concat(2*s,"px Freckle Face"),t.fillText("Score",r.x,r.y-2*s),t.restore()},this.addScore=function(t,e){e?a.score.value+=t:a.score.missed+=t},this.drawTimer=function(){var t=a.ctx,e=a.timer,s=(a.font,a.baseSize),r=e.pos,i=a.gameProps.time.current,o=a.gameProps.time.end;t.save(),t.font="".concat(4*s,"px Freckle Face"),t.textBaseline="top",t.fillStyle="rgba(".concat(255*i/o,",").concat(255-255*i/o,",0,1)"),t.fillText(i,r.x,r.y-6*s),t.font="".concat(2*s,"px Freckle Face"),t.fillText("Time",r.x,r.y-2*s),t.restore()},this.drawCursor=function(){var t=a.ctx,e=a.gameProps,s=a.baseSize,r=e.mousePos,i=2.5*s;t.save();var o=t.createRadialGradient(r.x,r.y,i/3,r.x,r.y,i);t.globalCompositeOperation="screen",o.addColorStop(0,"rgba(100,200,150,0.5)"),o.addColorStop(1,"transparent"),t.fillStyle=o,t.beginPath(),t.arc(r.x,r.y,i,0,2*Math.PI),t.closePath(),t.fill(),t.restore()},this.drawIntro=function(){var t=a.ctx,e=a.baseSize,s=a.intro.pos;0!=a.gameProps.stage&&(s.y-=5);var r=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;t.save(),t.beginPath(),t.arc(s.x+a,s.y+r,i,0,2*Math.PI),t.closePath();var o=t.createRadialGradient(s.x+a,s.y+r,0,s.x+a,s.y+r,i);o.addColorStop(0,"transparent"),o.addColorStop(.7,"rgba(255,255,255,0.2)"),o.addColorStop(.9,"rgba(255,255,255,0.4)"),o.addColorStop(1,"transparent"),t.fillStyle=o,t.fill(),t.restore()};r(5*-e,0,5*e),r(e,-10*e,e/2),r(2*e,-4*e,e),r(-3*e,-8*e,1.7*e),r(5*e,-5*e,1.4*e),r(10*e,e,3*e),r(-3*e,8*e,2*e),r(5*e,10*e,3*e),r(-10*e,7*e,e),r(10*e,8*e,e/2),r(11*e,7*e,1.5*e),t.save(),t.globalCompositeOperation="overlay",t.fillStyle="yellow",t.font="".concat(6*e,"px Freckle Face"),t.textAlign="center",t.fillText("BUbbles",s.x,s.y),t.restore()},this.drawResult=function(){var t=a.ctx,e=a.baseSize,s=a.score,r=a.result.pos;t.save(),t.font="".concat(5*e,"px Freckle Face"),t.textAlign="center",t.fillStyle="rgba(200,200,100,1)",t.fillText("RESULTS",r.x,r.y),t.font="".concat(3*e,"px Freckle Face"),t.fillStyle="rgba(50,200,100,1)",t.fillText("SCORE: "+s.value,r.x,r.y+6*e),t.font="".concat(2*e,"px Freckle Face"),t.fillStyle="rgba(100,150,100,1)",t.fillText("missed: "+s.missed,r.x,r.y+8*e),t.restore()},this.gameProps=e,this.ctx=e.ctx,this.canvas=e.canvas,this.setPositions()};var f=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(d,{})})},g=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,13)).then((function(e){var a=e.getCLS,s=e.getFID,r=e.getFCP,i=e.getLCP,o=e.getTTFB;a(t),s(t),r(t),i(t),o(t)}))};o.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(f,{})}),document.getElementById("root")),g()},9:function(t,e,a){}},[[12,1,2]]]);
//# sourceMappingURL=main.9ddd4754.chunk.js.map